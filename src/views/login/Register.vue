<template>	<section>		<div class="login">			<div class="login-list">				<ul>					<li>						<div class="text">账号</div>						<div class="inputcolumn">							<mt-field type="tel" placeholder="输入手机号码" v-model="params.phone" :attr="{maxlength:11}" ></mt-field>						</div>					</li>					<li>						<div class="text">图片验证码</div>						<div class="inputcolumn">							<div class="inputflex">								<mt-field placeholder="请输入答案" v-model="params.imgcode" :attr="{maxlength:20}" ></mt-field>							</div>							<div class="inputphoto">								<img :src="codeImg" alt="" />							</div>						</div>					</li>					<li>						<div class="text">验证手机</div>						<div class="inputcolumn">							<div class="inputflex">								<mt-field type="tel" placeholder="输入验证码" v-model="params.code" :attr="{maxlength:6}" ></mt-field>							</div>							<div class="inputbtn" @click="handlePhonecode">								<phonecode-btn ref="phonecodeBtn"></phonecode-btn>							</div>						</div>					</li>					<li>						<div class="text">输入6位密码</div>						<div class="inputcolumn">							<mt-field  placeholder="设置密码" v-model="params.password" :attr="{maxlength:20}" ></mt-field>						</div>					</li>					<li>						<div class="text">确认密码</div>						<div class="inputcolumn">							<mt-field  placeholder="再次输入密码" v-model="params.repassword" :attr="{maxlength:20}" ></mt-field>						</div>					</li>				</ul>			</div>			<div class="login-agreen">				<mt-checklist v-model="agreenValue" :options="agreenOption"></mt-checklist>			</div>			<div class="common-btn">				<button type="button" @click="handleSubmit">确认</button>			</div>		</div>	</section></template><script>	import axios from 'axios'	import PhonecodeBtn from '@/components/PhonecodeBtn'	import { phoneNum } from '@/config/global'	import { Toast } from 'mint-ui';	export default {		name: "Register",		data(){			return{				agreenValue:['值A'],				agreenOption:[					{						label: '同意超级狐狸注册协议',						value: '值A'					},				],				disabled:false,				codeImg:'',				params:{					phone:'',					imgcode:'',					code:'',					password:'',					repassword:''				}			}		},		methods:{			handleSubmit(){				if(!phoneNum(this.params.phone)){					Toast('请填写正确的手机号码');					return false				}else if(this.params.code===''){					Toast('手机验证码不能为空');					return false				}else if(this.params.password===''){					Toast('请输入密码');					return false				}else if(this.params.repassword !== this.params.password){					Toast('二次密码输入不一致');					return false				}else{				}			},			handlePhonecode(){				if(!phoneNum(this.params.phone)){					Toast('请填写正确的手机号码');					return false				}				this.getTime().then(time=>{					let sendParams={						phone:this.params.phone,						timespan:time,						code:this.params.imgcode					};					this.$http('http://www.weirdfoxes.cn:99/ComService.svc/SendMes',{method:'post',data:sendParams}).then(data=>{						console.log('sendParams',sendParams);						console.log('------->',data);						this.$refs.phonecodeBtn.run();					}).catch(err=>{						Toast(err.message);					})				})			},			getCode(){				this.getTime().then(time=>{					axios.get(`https://java.weirdfoxes.cn/code/${time}`, {							responseType: 'arraybuffer'						})						.then(response => {							return 'data:image/png;base64,' + btoa(new Uint8Array(response.data).reduce((data, byte) => data + String.fromCharCode(byte), ''));						}).then(data => {							this.codeImg=data;					}).catch(err=>{						Toast(err.message)					})				})			},			getTime(){				let time=new Date().getTime();				return this.$http(`https://java.weirdfoxes.cn/code/time/${time}`).then(res=>{					return parseInt(res.data)				}).catch(err=>{					Toast(err.message);				})			}		},		components:{			PhonecodeBtn		},		mounted(){			this.getCode();		}	}</script><style rel="stylesheet" lang="scss">	@import "./scss/login";</style>